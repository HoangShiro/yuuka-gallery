<!--- MODIFIED FILE: templates/index.html --->
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Thư viện Nhân vật</title>
    <!-- YUUKA: Thêm script để xử lý theme, chống FOUC v1.0 -->
    <script>
        (function() {
            const theme = localStorage.getItem('yuuka-theme');
            if (theme === 'dark') {
                document.documentElement.classList.add('dark-mode');
            }
        })();
    </script>
    <!-- YUUKA: Thêm Google Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <!-- YUUKA: CSS của Lõi được tải trước -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v={{ cache_version }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='animations.css') }}?v={{ cache_version }}">
    
    <!-- YUUKA: PLUGIN CSS ASSETS -->
    {% for css_path in plugin_assets.css %}
        <link rel="stylesheet" href="{{ css_path }}?v={{ cache_version }}">
    {% endfor %}
</head>
<body class="is-logged-out">
    <div id="error-popup"></div>
    <div id="auth-container"></div>
    <div id="tabs" style="display: none;"></div>

    <div class="container">
        <div id="gallery-container" class="plugin-container" data-plugin-id="character-list">
            <div id="gallery"></div>
            <div id="loader">Đang tải...</div>
        </div>
        <!-- PLUGIN CONTAINERS SẼ ĐƯỢC JAVASCRIPT TỰ ĐỘNG THÊM VÀO ĐÂY -->
    </div>
    
    <div id="result-footer"></div>
    
    <div id="modal">
        <span id="modal-close" class="material-symbols-outlined">close</span>
        <div id="modal-content">
            <img id="modal-image">
            <div id="modal-caption"></div>
            <div id="modal-actions"></div>
        </div>
    </div>

    <div id="floating-search-bar">
        <form id="search-form" action="javascript:void(0);">
            <input type="text" id="search-box" placeholder="Tìm kiếm hoặc gõ lệnh...">
            <button type="submit" class="search-submit-btn">
                <span class="material-symbols-outlined">search</span>
            </button>
        </form>
    </div>

    <!-- YUUKA: Thanh điều hướng giờ đây chỉ là một container rỗng -->
    <nav id="main-nav">
        <div class="nav-group nav-group--main"></div>
        <div class="nav-spacer"></div>
        <div class="nav-group nav-group--tools"></div>
    </nav>

    <!-- YUUKA: JS của Lõi được tải trước -->
    <script src="{{ url_for('static', filename='sortable.min.js') }}?v={{ cache_version }}"></script>
    <script src="{{ url_for('static', filename='api.js') }}?v={{ cache_version }}"></script>
    <script src="{{ url_for('static', filename='script.js') }}?v={{ cache_version }}"></script>
    
    <!-- YUUKA: PLUGIN JS ASSETS -->
    {% for js_path in plugin_assets.js %}
        <script src="{{ js_path }}?v={{ cache_version }}"></script>
    {% endfor %}

    <!-- YUUKA: PLUGIN JS MODULES -->
    {% for js_path in plugin_assets.js_modules %}
        <script type="module" src="{{ js_path }}?v={{ cache_version }}"></script>
    {% endfor %}

</body>
</html>